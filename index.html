<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Piano Ivre - Synesthesias</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>&#x1f3b9;</text></svg>">
<style>
@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;1,400&display=swap');
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: 'Cormorant Garamond', serif;
    background: #010138;
    color: #e0e0ff;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    padding: 2rem 1rem;
}
.card {
    max-width: 520px;
    width: 100%;
    background: linear-gradient(135deg, rgba(5,3,69,0.97), rgba(2,1,50,0.98));
    border: 1px solid #1E3542;
    border-radius: 12px;
    padding: 2.5rem 2rem;
    box-shadow: 0 8px 40px rgba(0,0,0,0.5);
}
h1 {
    font-size: 1.8rem;
    font-weight: 400;
    letter-spacing: 0.3em;
    color: #fe4791;
    text-align: center;
    margin-bottom: 0.3rem;
}
.tagline {
    font-style: italic;
    font-size: 0.85rem;
    color: rgba(254,71,145,0.5);
    letter-spacing: 0.2em;
    text-align: center;
    margin-bottom: 2rem;
}
.section-label {
    font-size: 0.65rem;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: #fe4791;
    margin-bottom: 0.8rem;
}
.entry {
    display: block;
    padding: 0.7rem 0;
    border-bottom: 1px solid #1E3542;
    color: #535de6;
    text-decoration: none;
    font-size: 1.1rem;
    transition: color 0.2s;
}
.entry:hover { color: #60A5FA; }
.entry-date { font-style: italic; }
#loading {
    font-style: italic;
    color: rgba(224,224,255,0.5);
    text-align: center;
    padding: 2rem 0;
}
#error {
    color: #fe4791;
    text-align: center;
    padding: 1rem 0;
    display: none;
}
.footer {
    text-align: center;
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid #1E3542;
}
.footer a {
    color: #535de6;
    text-decoration: none;
    font-size: 0.85rem;
    font-style: italic;
}
.footer a:hover { color: #60A5FA; }
</style>
</head>
<body>
<div class="card">
    <h1>PIANO IVRE</h1>
    <p class="tagline">get a sip of music</p>

    <div class="section-label">Past synesthesias</div>
    <div id="list"></div>
    <div id="loading">Loading&hellip;</div>
    <div id="error"></div>

    <div class="footer">
        <a href="https://cedriccolas.com/project/pianocktail">cedriccolas.com/project/pianocktail</a>
    </div>
</div>
<script>
(function() {
    const API = 'https://api.github.com/repos/ccolas/piano-ivre-synesthesia/contents/';
    const datePattern = /^\d{4}-\d{2}-\d{2}_\d{2}-\d{2}-\d{2}$/;
    const listEl = document.getElementById('list');
    const loadingEl = document.getElementById('loading');
    const errorEl = document.getElementById('error');

    fetch(API)
        .then(r => { if (!r.ok) throw new Error(r.status); return r.json(); })
        .then(items => {
            const folders = items
                .filter(i => i.type === 'dir' && datePattern.test(i.name))
                .sort((a, b) => b.name.localeCompare(a.name));

            loadingEl.style.display = 'none';

            if (folders.length === 0) {
                errorEl.textContent = 'No synesthesias yet.';
                errorEl.style.display = 'block';
                return;
            }

            folders.forEach(f => {
                const a = document.createElement('a');
                a.className = 'entry';
                a.href = f.name + '/';
                const pretty = f.name.replace(/_/g, ' ').replace(/-/g, '/').replace(/\//g, function(m, offset) {
                    return offset < 10 ? '/' : ':';
                });
                // Format: YYYY/MM/DD HH:MM:SS
                const parts = f.name.split('_');
                const datePart = parts[0].replace(/-/g, '/');
                const timePart = parts[1].replace(/-/g, ':');
                a.innerHTML = '<span class="entry-date">' + datePart + ' &mdash; ' + timePart + '</span>';
                listEl.appendChild(a);
            });
        })
        .catch(err => {
            loadingEl.style.display = 'none';
            errorEl.textContent = 'Could not load synesthesias.';
            errorEl.style.display = 'block';
        });
})();
</script>
</body>
</html>